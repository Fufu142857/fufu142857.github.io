<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Lexicon | Fufu142857</title>
  <link rel="stylesheet" href="/assets/css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hack-font/3.3.0/web/hack.min.css">
  <link rel="icon" type="image/png" href="/figures/favicon.png">
</head>
<body>
  <style>
  /* === 0. 全局变量 === */
  :root {
      --gold-bronze: #8f7e5f;
      --gold-light: #ffdd99;
      --void: #0b0c10;
      --glass: rgba(11, 12, 16, 0.7);
      --alert: #a84444;
  }

  body, html {
      margin: 0; padding: 0;
      width: 100%; height: 100%;
      background-color: var(--void);
      color: #d0d0d0;
      font-family: 'Hack', 'PingFang SC', 'Heiti SC', 'Microsoft YaHei', sans-serif;
      overflow: hidden;
  }

  /* === 1. 背景层 === */
  #ambient-layer {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      z-index: 0;
      display: flex; justify-content: center; align-items: center;
      background: #111214;
  }
  svg.surreal-door {
      width: 100%; height: 100%;
      object-fit: cover; 
      opacity: 0.9;
      transition: opacity 1s ease;
  }

  /* === 2. Vim 容器 === */
  #vim-container {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: 112.5%;  
      max-width: 1200px;  
      height: 90%;  
      background: var(--glass);
      backdrop-filter: blur(5px); 
      border: 1px solid rgba(143, 126, 95, 0.2);
      box-shadow: 0 0 80px rgba(0,0,0,0.8);
      display: flex; flex-direction: column;
      z-index: 10;
      opacity: 0; 
      transition: opacity 1.5s ease;
  }

  /* Vim UI 组件 */
  .vim-header {
      background: rgba(0,0,0,0.4);
      padding: 8px 20px;
      border-bottom: 1px solid rgba(255,255,255,0.05);
      display: flex; justify-content: space-between;
      color: #777; font-size: 19.2px;
  }
  .vim-editor {
      flex: 1;
      padding: 40px 80px;
      overflow-y: auto; scrollbar-width: none; scroll-behavior: smooth;
  }
  .vim-editor::-webkit-scrollbar { display: none; }

  /* 字体与排版 */
  .vim-editor h1 { 
      font-family: 'Hack', serif; 
      font-weight: bold;
      font-size: 2.4em; 
      color: var(--gold-light); 
      text-align: center; margin-bottom: 20px;
      margin-top: 
      text-shadow: 0 0 30px rgba(255, 221, 153, 0.3);
      letter-spacing: 2px;
  }
  .vim-editor h2 { 
      color: var(--gold-bronze); margin-top: 15px; 
      border-bottom: 1px solid rgba(143, 126, 95, 0.3); 
      padding-bottom: 8px; font-weight: bold;
      font-size: 1.8em;
  }
  .vim-editor h3 { color: var(--gold-bronze); margin-top: 15px;margin-bottom: 5px; font-weight: bold; font-size: 1.5em; }
  .vim-editor h4 { 
      text-align: center;       
      margin-top: 0;         
      margin-bottom: 0;      
      font-weight: bold;        
      color: #bbb;             
      font-size: 1.1em;       
  }
  .vim-editor p, .vim-editor li { 
      line-height: 1.8; color: #ccc; font-size: 21.6px; 
      text-shadow: 0 1px 2px rgba(0,0,0,0.8);
      text-indent: 2em;
      margin-top: 0;
      margin-bottom: 0;
  }
  .vim-editor hr {
      border: 0;
      height: 2.5px;
      background-image: linear-gradient(to right, rgba(0, 0, 0, 0), var(--gold-bronze), rgba(0, 0, 0, 0));
      margin: 40px 0;
      opacity: 0.6;
  }

  /* 替换原有的 .vim-editor blockquote */
.vim-editor blockquote {
    margin: 15px 0;
    padding: 15px 25px; /* 上下15px，左右25px */
    
    /* 左侧亮金线条 */
    border-left: 4px solid var(--gold-bronze);
    background: rgba(143, 126, 95, 0.05); /* 极淡的金色背景 */
    
    color: #bbb;
    font-family: 'PingFang SC', 'Heiti SC', serif;
    font-size: 1.32em; /* 保持你之前放大的字体 */
    line-height: 1.8;
}

/* 引用内部的段落：取消首行缩进，左对齐更整齐 */
.vim-editor blockquote p {
    text-indent: 0; 
    margin: 0.5em 0;
}

/* 署名样式 */
.vim-editor blockquote p:last-child {
    color: var(--gold-bronze);
    font-size: 0.9em;
    text-align: right;
    margin-top: 15px;
    font-style: italic; /* 署名用斜体 */
}

  /* 状态栏与命令行 */
  .vim-status {
      background: var(--gold-bronze);
      color: #111;
      padding: 4px 15px; font-weight: bold; font-size: 16.8px;
      display: flex; justify-content: space-between;
  }
  .vim-cmd {
      background: rgba(0,0,0,0.8); color: #888; padding: 6px 15px; 
      border-top: 1px solid #333; font-size: 16.8px;
  }
  .blink-cursor {
      display: inline-block; width: 8px; height: 16px; background: var(--gold-bronze);
      animation: blink 1s infinite; vertical-align: middle;
  }

  /* === 3. 启动屏 === */
  #boot-screen {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: #0b0c10;
      z-index: 9999;
      display: none; flex-direction: column; justify-content: center; align-items: center;
      transition: opacity 1s ease;
      backdrop-filter: blur(10px);
  }
  .boot-content { max-width: 680px; text-align: center; padding: 0 20px; }
  .warning-title {
      color: var(--alert); font-family: 'Hack', monospace; font-size: 1.2rem; 
      letter-spacing: 4px; margin-bottom: 3rem;
      border-bottom: 1px solid rgba(168, 68, 68, 0.3); padding-bottom: 15px; display: inline-block;
  }
  .warning-text {
      color: #bfbfbf; font-size: 1.15rem; line-height: 2.2; font-weight: 300; 
      font-family: 'PingFang SC', 'Heiti SC', sans-serif; 
  }
  .highlight { color: var(--gold-light); border-bottom: 1px solid rgba(143, 126, 95, 0.4); padding-bottom: 2px; }
  .danger-text { color: #bd6a6a; margin-top: 20px; display: block; font-style: italic; }
  .signature {
      margin-top: 30px; font-family: 'Hack', monospace; color: var(--gold-bronze);
      font-size: 0.9rem; text-align: right; margin-right: 15%; opacity: 0.8;
  }
  .boot-btn {
      margin-top: 50px; padding: 15px 50px; border: 1px solid var(--gold-bronze); 
      color: var(--gold-bronze); background: transparent; font-family: 'Hack', sans-serif; 
      font-size: 1rem; letter-spacing: 2px; cursor: pointer; transition: all 0.4s ease;
  }
  .boot-btn:hover { 
      background: var(--gold-bronze); color: #000; box-shadow: 0 0 30px var(--gold-bronze); transform: scale(1.05); 
  }

  /* === 4. 目录 (Holographic Menu) === */
  #holo-menu {
      position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
      width: 750px; 
      background: rgba(10, 10, 10, 0.95);
      border: 1px solid var(--gold-bronze);
      z-index: 100; opacity: 0; pointer-events: none; padding: 25px;
      transition: all 0.2s;
  }
  #holo-menu.active { opacity: 1; pointer-events: auto; }
  .holo-item { 
      padding: 12px 15px; border-bottom: 1px solid #222; cursor: pointer; color: #888; transition: 0.2s; 
      font-size: 20.4px;
      /* 让中英文对齐更好看 */
      display: flex; justify-content: space-between; align-items: center;
  }
  /* 选中态样式 */
  .holo-item.selected, .holo-item:hover { 
      color: var(--gold-light); padding-left: 20px; background: rgba(255,255,255,0.05);
      border-left: 2px solid var(--gold-bronze);
  }

  @keyframes blink { 50% { opacity: 0; } }

</style>

<div id="ambient-layer">
  <svg class="surreal-door" viewBox="0 0 1000 428" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice">
      <defs>
          <filter id="noiseFilter">
              <feTurbulence type="fractalNoise" baseFrequency="0.5" numOctaves="3" stitchTiles="stitch"/>
              <feGaussianBlur stdDeviation="0.5" />
              <feColorMatrix type="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 0.5 0"/>
              <feComposite operator="in" in2="SourceGraphic" result="monoNoise"/>
              <feBlend mode="multiply" in="SourceGraphic" in2="monoNoise"/>
          </filter>

          <linearGradient id="bronzeGradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" style="stop-color:#4a3c2a;stop-opacity:1" />
              <stop offset="50%" style="stop-color:#8f7e5f;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#3d3222;stop-opacity:1" />
          </linearGradient>
          <radialGradient id="warmLight" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
              <stop offset="0%" style="stop-color:#ffdd99;stop-opacity:0.9" />
              <stop offset="100%" style="stop-color:#ffdd99;stop-opacity:0" />
          </radialGradient>
           <linearGradient id="foggyGround" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" style="stop-color:#2d3748;stop-opacity:1" /> <stop offset="60%" style="stop-color:#1a202c;stop-opacity:1" /> <stop offset="100%" style="stop-color:#0f1218;stop-opacity:1" /> </linearGradient>
      </defs>
      <g filter="url(#noiseFilter)">
          <rect width="1000" height="428" fill="url(#foggyGround)"/>
          <path d="M0,250 Q250,220 500,250 T1000,250 L1000,428 L0,428 Z" fill="#1a202c" opacity="0.5"/>
          <path d="M0,300 Q300,280 600,300 T1200,300 L1200,428 L0,428 Z" fill="#0f1218" opacity="0.6"/>
          <ellipse cx="500" cy="350" rx="80" ry="20" fill="url(#warmLight)" opacity="0.6"/>
          <rect x="460" y="120" width="80" height="230" fill="#ffdd99" opacity="0.8"/>
          <path d="M440,100 L560,100 L560,350 L580,350 L580,80 L420,80 L420,350 L440,350 Z" fill="#2d333b"/>
          <path d="M450,110 L550,110 L550,350 L450,350 Z" fill="#111214"/> <path d="M460,120 L530,125 L530,345 L460,350 Z" fill="url(#bronzeGradient)"/>
          <path d="M530,125 L540,120 L540,340 L530,345 Z" fill="#3d3222"/>
          <ellipse cx="500" cy="360" rx="100" ry="10" fill="#000" opacity="0.4"/>
      </g>
  </svg>
</div>

<div id="boot-screen">
  <div class="boot-content">
      <div class="warning-title">/// SYSTEM PROTOCOL ///</div>
      <div class="warning-text">
          <p>死亡是一个严肃的命题，有时会很沉重。</p>
          <p style="margin: 2rem 0;"> 在推开这扇门之前，请接受我的承诺：<br>
              此处 <span class="highlight">绝无</span> 令人不安的血腥图像，<br>
              亦 <span class="highlight">绝无</span> 干预生命的诱导指南。
          </p>
          <p>我的初衷，是通过对终点的客观思考，<br>反向呼吁对当下的珍视。</p>
          <p class="danger-text">但请注意：这里的思想可能产生观念冲击。<br>若感到存在主义焦虑或不适，请立即退出。</p>
          <p>旅途即将开启，祝君愉快。</p>
      </div>
      <div class="signature">謹慎观看. fufu.</div>
      <button class="boot-btn" onclick="bootSystem()">[ INITIALIZE ]</button>
  </div>
</div>

<div id="vim-container">
  <div class="vim-header">
      <span>The Lexicon</span>
      <span>RO | UTF-8</span>
  </div>
  
  <div class="vim-editor" id="editor-view">
      

      <br><br><br>
      <div style="text-align:center; color:#444; font-size: 14px;">~ End of Buffer ~</div>
  </div>

  <div class="vim-status">
      <span>NORMAL</span>
      <span>master</span>
      <span id="pct">TOP</span>
  </div>
  <div class="vim-cmd">
      fufu@142857:~/death/alias.md $ <span class="blink-cursor"></span>
  </div>
</div>

<div id="holo-menu">
  <div style="color:var(--gold-bronze); font-size:18px; margin-bottom:20px; text-align:center; letter-spacing: 3px;">/// DIRECTORY LIST ///</div>
  <div id="menu-list"></div>
</div>

<script>
const fileList = [
  
  
    {
      "title": "Threshold of the Void",
      "tname": "首页",
      "url": "/death/readme.html",
      "name": "readme.md"
    },
  
    {
      "title": "The Lexicon",
      "tname": "称谓收录",
      "url": "/death/alias.html",
      "name": "alias.md"
    },
  
    {
      "title": "One truly  serious Philosophical Problem",
      "tname": "关于自杀",
      "url": "/death/suicide.html",
      "name": "suicide.md"
    }
  
];
</script>

<script>
  let isMenuOpen = false;
  let selectedIndex = 0;

  if (sessionStorage.getItem('death_protocol_signed') === 'true') {
      const vim = document.getElementById('vim-container');
      vim.style.transition = 'none'; 
      vim.style.opacity = '1';       
  } else {
      document.getElementById('boot-screen').style.display = 'flex'; 
  }

  function bootSystem() {
      sessionStorage.setItem('death_protocol_signed', 'true');
      document.getElementById('boot-screen').style.opacity = '0';
      setTimeout(() => {
          document.getElementById('boot-screen').style.display = 'none';
          document.getElementById('vim-container').style.opacity = '1';
      }, 1000);
  }

  // 渲染文件列表菜单 (逻辑升级：支持中文名)
  function renderMenu() {
      const list = document.getElementById('menu-list');
      list.innerHTML = '';
      
      fileList.forEach((file, index) => {
          let item = document.createElement('div');
          item.className = 'holo-item';
          if (index === selectedIndex) item.classList.add('selected');
          
          // 构建显示内容：English Title [ 中文名 ]
          let displayName = file.title;
          if (file.tname) {
              displayName += ` -<span style="opacity: 0.6; font-size: 1em; margin-left: 10px; font-family: 'PingFang SC', sans-serif;">${file.tname}</span>`;
          }

          item.innerHTML = `<span>${displayName}</span>`;
          
          item.onclick = () => { 
              window.location.href = file.url; 
          };
          list.appendChild(item);
      });
  }

  const menu = document.getElementById('holo-menu');

  function toggleMenu() {
      isMenuOpen = !isMenuOpen;
      menu.classList.toggle('active', isMenuOpen);
      if (isMenuOpen) {
          renderMenu();
      }
  }

  // 记录 gg 的连击状态
  let lastKey = null;
  let lastTime = 0;

  // 全局键盘监听
  document.addEventListener('keydown', (e) => {
      // 只有在 Vim 界面显示后才生效
      if (document.getElementById('vim-container').style.opacity === '1') {
          
          const now = new Date().getTime();
          const editor = document.getElementById('editor-view');

          // --- 1. 全局快捷键 ---
          // [0] 回到首页 (Fufu系统顶层)
          if (e.key === '0') {
              window.location.href = "/";
          }
          // [Space] 唤出/关闭目录
          if (e.code === 'Space') { 
              e.preventDefault(); 
              toggleMenu(); 
          }
          // [G] (Shift+g) 去到底部
          if (e.key === 'G') {
              editor.scrollTop = editor.scrollHeight;
          }
          // [gg] 双击g 去到顶部
          if (e.key === 'g') {
              if (lastKey === 'g' && (now - lastTime) < 500) {
                  editor.scrollTop = 0;
              }
          }
          // 更新连击记录
          if (e.key !== 'Shift') { lastKey = e.key; lastTime = now; }

          // --- 2. 菜单打开时的逻辑 ---
          if (isMenuOpen) {
              // j/k 上下选择文件
              if (e.key === 'j' || e.key === 'ArrowDown') {
                  e.preventDefault();
                  selectedIndex = (selectedIndex + 1) % fileList.length;
                  renderMenu();
              }
              if (e.key === 'k' || e.key === 'ArrowUp') {
                  e.preventDefault();
                  selectedIndex = (selectedIndex - 1 + fileList.length) % fileList.length;
                  renderMenu();
              }
              // Enter 进入文件
              if (e.key === 'Enter') {
                  e.preventDefault();
                  window.location.href = fileList[selectedIndex].url;
              }
              // Escape 关闭菜单
              if (e.key === 'Escape') {
                  toggleMenu();
              }
          } 
          
          // --- 3. 菜单关闭时的逻辑 (阅读模式) ---
          else {
              // j/k 滚动文字
              if (e.key === 'j') editor.scrollBy({top: 60, behavior: 'smooth'});
              if (e.key === 'k') editor.scrollBy({top: -60, behavior: 'smooth'});

              // [h] 上一篇 (Previous File)
              if (e.key === 'h') {
                  // 找到当前文件在列表中的位置
                  let currentIdx = fileList.findIndex(f => window.location.href.includes(f.url));
                  if (currentIdx === -1) currentIdx = 0; // 找不到就默认第一个
                  
                  if (currentIdx > 0) {
                      // 如果不是第一篇，就跳转前一篇
                      window.location.href = fileList[currentIdx - 1].url;
                  } else {
                      // (可选) 如果是第一篇，可以提示“已经是第一篇了”
                      console.log("Already at the top.");
                  }
              }

              // [l] 下一篇 (Next File) - 对应 Vim 的右移
              if (e.key === 'l') {
                  let currentIdx = fileList.findIndex(f => window.location.href.includes(f.url));
                  if (currentIdx === -1) currentIdx = 0;
                  
                  if (currentIdx < fileList.length - 1) {
                      window.location.href = fileList[currentIdx + 1].url;
                  }
              }
          }
      }
  });

  document.getElementById('editor-view').addEventListener('scroll', (e) => {
      const el = e.target;
      const p = Math.round((el.scrollTop / (el.scrollHeight - el.clientHeight)) * 100);
      document.getElementById('pct').innerText = (isNaN(p) ? 0 : p) + '%';
  });
</script>

</body>
</html>
